{"ast":null,"code":"import _toConsumableArray from\"C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Col,Divider,Input,Row,Tooltip}from\"antd\";import React,{useState}from\"react\";import Blockies from\"react-blockies\";import{Transactor}from\"../../helpers\";import tryToDisplay from\"./utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require(\"ethers\"),utils=_require.utils,BigNumber=_require.BigNumber;var getFunctionInputKey=function getFunctionInputKey(functionInfo,input,inputIndex){var name=(input===null||input===void 0?void 0:input.name)?input.name:\"input_\"+inputIndex+\"_\";return functionInfo.name+\"_\"+name+\"_\"+input.type;};export default function FunctionForm(_ref){var contractFunction=_ref.contractFunction,functionInfo=_ref.functionInfo,provider=_ref.provider,gasPrice=_ref.gasPrice,triggerRefresh=_ref.triggerRefresh;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),txValue=_useState4[0],setTxValue=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),returnValue=_useState6[0],setReturnValue=_useState6[1];var tx=Transactor(provider,gasPrice);var inputs=functionInfo.inputs.map(function(input,inputIndex){var key=getFunctionInputKey(functionInfo,input,inputIndex);var buttons=\"\";if(input.type===\"bytes32\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"to bytes32\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formUpdate,_formUpdate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(utils.isHexString(form[key])){formUpdate=_objectSpread({},form);formUpdate[key]=utils.parseBytes32String(form[key]);setForm(formUpdate);}else{_formUpdate=_objectSpread({},form);_formUpdate[key]=utils.formatBytes32String(form[key]);setForm(_formUpdate);}case 1:case\"end\":return _context.stop();}}},_callee);})),children:\"#\\uFE0F\\u20E3\"})});}else if(input.type===\"bytes\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"to hex\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var formUpdate,_formUpdate2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(utils.isHexString(form[key])){formUpdate=_objectSpread({},form);formUpdate[key]=utils.toUtf8String(form[key]);setForm(formUpdate);}else{_formUpdate2=_objectSpread({},form);_formUpdate2[key]=utils.hexlify(utils.toUtf8Bytes(form[key]));setForm(_formUpdate2);}case 1:case\"end\":return _context2.stop();}}},_callee2);})),children:\"#\\uFE0F\\u20E3\"})});}else if(input.type===\"uint256\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"* 10 ** 18\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var formUpdate;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formUpdate=_objectSpread({},form);formUpdate[key]=utils.parseEther(form[key]);setForm(formUpdate);case 3:case\"end\":return _context3.stop();}}},_callee3);})),children:\"\\u2734\\uFE0F\"})});}else if(input.type===\"address\"){var possibleAddress=form[key]&&form[key].toLowerCase&&form[key].toLowerCase().trim();if(possibleAddress&&possibleAddress.length===42){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"blockie\",children:/*#__PURE__*/_jsx(Blockies,{seed:possibleAddress,scale:3})});}}return/*#__PURE__*/_jsx(\"div\",{style:{margin:2},children:/*#__PURE__*/_jsx(Input,{size:\"large\",placeholder:input.name?input.type+\" \"+input.name:input.type,autoComplete:\"off\",value:form[key],name:key,onChange:function onChange(event){var formUpdate=_objectSpread({},form);formUpdate[event.target.name]=event.target.value;setForm(formUpdate);},suffix:buttons})},key);});var txValueInput=/*#__PURE__*/_jsx(\"div\",{style:{margin:2},children:/*#__PURE__*/_jsx(Input,{placeholder:\"transaction value\",onChange:function onChange(e){return setTxValue(e.target.value);},value:txValue,addonAfter:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\" * 10^18 \",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var floatValue;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:floatValue=parseFloat(txValue);if(floatValue)setTxValue(\"\"+floatValue*Math.pow(10,18));case 2:case\"end\":return _context4.stop();}}},_callee4);})),children:\"\\u2733\\uFE0F\"})})}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"number to hex\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setTxValue(BigNumber.from(txValue).toHexString());case 1:case\"end\":return _context5.stop();}}},_callee5);})),children:\"#\\uFE0F\\u20E3\"})})})]})})})},\"txValueInput\");if(functionInfo.payable){inputs.push(txValueInput);}var buttonIcon=functionInfo.type===\"call\"?/*#__PURE__*/_jsx(Button,{style:{marginLeft:-32},children:\"Read\\uD83D\\uDCE1\"}):/*#__PURE__*/_jsx(Button,{style:{marginLeft:-32},children:\"Send\\uD83D\\uDCB8\"});inputs.push(/*#__PURE__*/_jsx(\"div\",{style:{cursor:\"pointer\",margin:2},children:/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setReturnValue(e.target.value);},defaultValue:\"\",bordered:false,disabled:true,value:returnValue,suffix:/*#__PURE__*/_jsx(\"div\",{style:{width:50,height:30,margin:0},type:\"default\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var args,result,returned,overrides,_returned;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:args=functionInfo.inputs.map(function(input,inputIndex){var key=getFunctionInputKey(functionInfo,input,inputIndex);var value=form[key];if(input.baseType===\"array\"){value=JSON.parse(value);}else if(input.type===\"bool\"){if(value===\"true\"||value===\"1\"||value===\"0x1\"||value===\"0x01\"||value===\"0x0001\"){value=1;}else{value=0;}}return value;});if(!(functionInfo.stateMutability===\"view\"||functionInfo.stateMutability===\"pure\")){_context6.next=14;break;}_context6.prev=2;_context6.next=5;return contractFunction.apply(void 0,_toConsumableArray(args));case 5:returned=_context6.sent;result=tryToDisplay(returned);_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](2);console.error(_context6.t0);case 12:_context6.next=21;break;case 14:overrides={};if(txValue){overrides.value=txValue;// ethers.utils.parseEther()\n}if(gasPrice){overrides.gasPrice=gasPrice;}// Uncomment this if you want to skip the gas estimation for each transaction\n// overrides.gasLimit = hexlify(1200000);\n// console.log(\"Running with extras\",extras)\n_context6.next=19;return tx(contractFunction.apply(void 0,_toConsumableArray(args).concat([overrides])));case 19:_returned=_context6.sent;result=tryToDisplay(_returned);case 21:console.log(\"SETTING RESULT:\",result);setReturnValue(result);triggerRefresh(true);case 24:case\"end\":return _context6.stop();}}},_callee6,null,[[2,9]]);})),children:buttonIcon})})},\"goButton\"));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:8,style:{textAlign:\"right\",opacity:0.333,paddingRight:6,fontSize:24},children:functionInfo.name}),/*#__PURE__*/_jsx(Col,{span:16,children:inputs})]}),/*#__PURE__*/_jsx(Divider,{})]});}","map":{"version":3,"sources":["C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/packages/react-app/src/components/Contract/FunctionForm.jsx"],"names":["Button","Col","Divider","Input","Row","Tooltip","React","useState","Blockies","Transactor","tryToDisplay","require","utils","BigNumber","getFunctionInputKey","functionInfo","input","inputIndex","name","type","FunctionForm","contractFunction","provider","gasPrice","triggerRefresh","form","setForm","txValue","setTxValue","returnValue","setReturnValue","tx","inputs","map","key","buttons","cursor","isHexString","formUpdate","parseBytes32String","formatBytes32String","toUtf8String","hexlify","toUtf8Bytes","parseEther","possibleAddress","toLowerCase","trim","length","margin","event","target","value","txValueInput","e","floatValue","parseFloat","from","toHexString","payable","push","buttonIcon","marginLeft","width","height","args","baseType","JSON","parse","stateMutability","returned","result","console","error","overrides","log","textAlign","opacity","paddingRight","fontSize"],"mappings":"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","sourcesContent":["import { Button, Col, Divider, Input, Row, Tooltip } from \"antd\";\r\nimport React, { useState } from \"react\";\r\nimport Blockies from \"react-blockies\";\r\nimport { Transactor } from \"../../helpers\";\r\nimport tryToDisplay from \"./utils\";\r\n\r\nconst { utils, BigNumber } = require(\"ethers\");\r\n\r\nconst getFunctionInputKey = (functionInfo, input, inputIndex) => {\r\n  const name = input?.name ? input.name : \"input_\" + inputIndex + \"_\";\r\n  return functionInfo.name + \"_\" + name + \"_\" + input.type;\r\n};\r\n\r\nexport default function FunctionForm({ contractFunction, functionInfo, provider, gasPrice, triggerRefresh }) {\r\n  const [form, setForm] = useState({});\r\n  const [txValue, setTxValue] = useState();\r\n  const [returnValue, setReturnValue] = useState();\r\n\r\n  const tx = Transactor(provider, gasPrice);\r\n\r\n  const inputs = functionInfo.inputs.map((input, inputIndex) => {\r\n    const key = getFunctionInputKey(functionInfo, input, inputIndex);\r\n\r\n    let buttons = \"\";\r\n    if (input.type === \"bytes32\") {\r\n      buttons = (\r\n        <Tooltip placement=\"right\" title=\"to bytes32\">\r\n          <div\r\n            type=\"dashed\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={async () => {\r\n              if (utils.isHexString(form[key])) {\r\n                const formUpdate = { ...form };\r\n                formUpdate[key] = utils.parseBytes32String(form[key]);\r\n                setForm(formUpdate);\r\n              } else {\r\n                const formUpdate = { ...form };\r\n                formUpdate[key] = utils.formatBytes32String(form[key]);\r\n                setForm(formUpdate);\r\n              }\r\n            }}\r\n          >\r\n            #Ô∏è‚É£\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    } else if (input.type === \"bytes\") {\r\n      buttons = (\r\n        <Tooltip placement=\"right\" title=\"to hex\">\r\n          <div\r\n            type=\"dashed\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={async () => {\r\n              if (utils.isHexString(form[key])) {\r\n                const formUpdate = { ...form };\r\n                formUpdate[key] = utils.toUtf8String(form[key]);\r\n                setForm(formUpdate);\r\n              } else {\r\n                const formUpdate = { ...form };\r\n                formUpdate[key] = utils.hexlify(utils.toUtf8Bytes(form[key]));\r\n                setForm(formUpdate);\r\n              }\r\n            }}\r\n          >\r\n            #Ô∏è‚É£\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    } else if (input.type === \"uint256\") {\r\n      buttons = (\r\n        <Tooltip placement=\"right\" title=\"* 10 ** 18\">\r\n          <div\r\n            type=\"dashed\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={async () => {\r\n              const formUpdate = { ...form };\r\n              formUpdate[key] = utils.parseEther(form[key]);\r\n              setForm(formUpdate);\r\n            }}\r\n          >\r\n            ‚ú¥Ô∏è\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    } else if (input.type === \"address\") {\r\n      const possibleAddress = form[key] && form[key].toLowerCase && form[key].toLowerCase().trim();\r\n      if (possibleAddress && possibleAddress.length === 42) {\r\n        buttons = (\r\n          <Tooltip placement=\"right\" title=\"blockie\">\r\n            <Blockies seed={possibleAddress} scale={3} />\r\n          </Tooltip>\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div style={{ margin: 2 }} key={key}>\r\n        <Input\r\n          size=\"large\"\r\n          placeholder={input.name ? input.type + \" \" + input.name : input.type}\r\n          autoComplete=\"off\"\r\n          value={form[key]}\r\n          name={key}\r\n          onChange={event => {\r\n            const formUpdate = { ...form };\r\n            formUpdate[event.target.name] = event.target.value;\r\n            setForm(formUpdate);\r\n          }}\r\n          suffix={buttons}\r\n        />\r\n      </div>\r\n    );\r\n  });\r\n\r\n  const txValueInput = (\r\n    <div style={{ margin: 2 }} key=\"txValueInput\">\r\n      <Input\r\n        placeholder=\"transaction value\"\r\n        onChange={e => setTxValue(e.target.value)}\r\n        value={txValue}\r\n        addonAfter={\r\n          <div>\r\n            <Row>\r\n              <Col span={16}>\r\n                <Tooltip placement=\"right\" title=\" * 10^18 \">\r\n                  <div\r\n                    type=\"dashed\"\r\n                    style={{ cursor: \"pointer\" }}\r\n                    onClick={async () => {\r\n                      const floatValue = parseFloat(txValue);\r\n                      if (floatValue) setTxValue(\"\" + floatValue * 10 ** 18);\r\n                    }}\r\n                  >\r\n                    ‚ú≥Ô∏è\r\n                  </div>\r\n                </Tooltip>\r\n              </Col>\r\n              <Col span={16}>\r\n                <Tooltip placement=\"right\" title=\"number to hex\">\r\n                  <div\r\n                    type=\"dashed\"\r\n                    style={{ cursor: \"pointer\" }}\r\n                    onClick={async () => {\r\n                      setTxValue(BigNumber.from(txValue).toHexString());\r\n                    }}\r\n                  >\r\n                    #Ô∏è‚É£\r\n                  </div>\r\n                </Tooltip>\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n\r\n  if (functionInfo.payable) {\r\n    inputs.push(txValueInput);\r\n  }\r\n\r\n  const buttonIcon =\r\n    functionInfo.type === \"call\" ? (\r\n      <Button style={{ marginLeft: -32 }}>Readüì°</Button>\r\n    ) : (\r\n      <Button style={{ marginLeft: -32 }}>Sendüí∏</Button>\r\n    );\r\n  inputs.push(\r\n    <div style={{ cursor: \"pointer\", margin: 2 }} key=\"goButton\">\r\n      <Input\r\n        onChange={e => setReturnValue(e.target.value)}\r\n        defaultValue=\"\"\r\n        bordered={false}\r\n        disabled\r\n        value={returnValue}\r\n        suffix={\r\n          <div\r\n            style={{ width: 50, height: 30, margin: 0 }}\r\n            type=\"default\"\r\n            onClick={async () => {\r\n              const args = functionInfo.inputs.map((input, inputIndex) => {\r\n                const key = getFunctionInputKey(functionInfo, input, inputIndex);\r\n                let value = form[key];\r\n                if (input.baseType === \"array\") {\r\n                  value = JSON.parse(value);\r\n                } else if (input.type === \"bool\") {\r\n                  if (value === \"true\" || value === \"1\" || value === \"0x1\" || value === \"0x01\" || value === \"0x0001\") {\r\n                    value = 1;\r\n                  } else {\r\n                    value = 0;\r\n                  }\r\n                }\r\n                return value;\r\n              });\r\n\r\n              let result;\r\n              if (functionInfo.stateMutability === \"view\" || functionInfo.stateMutability === \"pure\") {\r\n                try {\r\n                  const returned = await contractFunction(...args);\r\n                  result = tryToDisplay(returned);\r\n                } catch (err) {\r\n                  console.error(err);\r\n                }\r\n              } else {\r\n                const overrides = {};\r\n                if (txValue) {\r\n                  overrides.value = txValue; // ethers.utils.parseEther()\r\n                }\r\n                if (gasPrice) {\r\n                  overrides.gasPrice = gasPrice;\r\n                }\r\n                // Uncomment this if you want to skip the gas estimation for each transaction\r\n                // overrides.gasLimit = hexlify(1200000);\r\n\r\n                // console.log(\"Running with extras\",extras)\r\n                const returned = await tx(contractFunction(...args, overrides));\r\n                result = tryToDisplay(returned);\r\n              }\r\n\r\n              console.log(\"SETTING RESULT:\", result);\r\n              setReturnValue(result);\r\n              triggerRefresh(true);\r\n            }}\r\n          >\r\n            {buttonIcon}\r\n          </div>\r\n        }\r\n      />\r\n    </div>,\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Row>\r\n        <Col\r\n          span={8}\r\n          style={{\r\n            textAlign: \"right\",\r\n            opacity: 0.333,\r\n            paddingRight: 6,\r\n            fontSize: 24,\r\n          }}\r\n        >\r\n          {functionInfo.name}\r\n        </Col>\r\n        <Col span={16}>{inputs}</Col>\r\n      </Row>\r\n      <Divider />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}