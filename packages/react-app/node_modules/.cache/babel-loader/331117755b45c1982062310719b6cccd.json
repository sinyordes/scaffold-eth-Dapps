{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{CameraOutlined,QrcodeOutlined}from\"@ant-design/icons\";import{Badge,Input}from\"antd\";import{useLookupAddress}from\"eth-hooks/dapps/ens\";import React,{useCallback,useState}from\"react\";import QrReader from\"react-qr-reader\";import Blockie from\"./Blockie\";import{ethers}from\"ethers\";// probably we need to change value={toAddress} to address={toAddress}\n/*\r\n  ~ What it does? ~\r\n  Displays an address input with QR scan option\r\n  ~ How can I use? ~\r\n  <AddressInput\r\n    autoFocus\r\n    ensProvider={mainnetProvider}\r\n    placeholder=\"Enter address\"\r\n    value={toAddress}\r\n    onChange={setToAddress}\r\n  />\r\n  ~ Features ~\r\n  - Provide ensProvider={mainnetProvider} and your address will be replaced by ENS name\r\n              (ex. \"0xa870\" => \"user.eth\") or you can enter directly ENS name instead of address\r\n  - Provide placeholder=\"Enter address\" value for the input\r\n  - Value of the address input is stored in value={toAddress}\r\n  - Control input change by onChange={setToAddress}\r\n                          or onChange={address => { setToAddress(address);}}\r\n*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var isENS=function isENS(){var address=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";return address.endsWith(\".eth\")||address.endsWith(\".xyz\");};export default function AddressInput(props){var ensProvider=props.ensProvider,onChange=props.onChange;var _useState=useState(props.value),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),scan=_useState4[0],setScan=_useState4[1];var currentValue=typeof props.value!==\"undefined\"?props.value:value;var ens=useLookupAddress(props.ensProvider,currentValue);var updateAddress=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(newValue){var address,possibleAddress;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeof newValue!==\"undefined\")){_context.next=14;break;}address=newValue;if(!isENS(address)){_context.next=12;break;}_context.prev=3;_context.next=6;return ensProvider.resolveName(address);case 6:possibleAddress=_context.sent;if(possibleAddress){address=possibleAddress;}// eslint-disable-next-line no-empty\n_context.next=12;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);case 12:setValue(address);if(typeof onChange===\"function\"){onChange(address);}case 14:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[ensProvider,onChange]);return/*#__PURE__*/_jsxs(\"div\",{children:[scan?/*#__PURE__*/_jsx(\"div\",{style:{zIndex:256,position:\"absolute\",left:0,top:0,width:\"100%\"},onClick:function onClick(){setScan(false);},children:/*#__PURE__*/_jsx(QrReader,{delay:250,resolution:1200,onError:function onError(e){console.log(\"SCAN ERROR\",e);setScan(false);},onScan:function onScan(newValue){if(newValue){console.log(\"SCAN VALUE\",newValue);var possibleNewValue=newValue;if(possibleNewValue.indexOf(\"/\")>=0){possibleNewValue=possibleNewValue.substr(possibleNewValue.lastIndexOf(\"0x\"));console.log(\"CLEANED VALUE\",possibleNewValue);}setScan(false);updateAddress(possibleNewValue);}},style:{width:\"100%\"}})}):\"\",/*#__PURE__*/_jsx(Input,{id:\"0xAddress\"// name it something other than address for auto fill doxxing\n,name:\"0xAddress\"// name it something other than address for auto fill doxxing\n,autoComplete:\"off\",autoFocus:props.autoFocus,placeholder:props.placeholder?props.placeholder:\"address\",prefix:/*#__PURE__*/_jsx(Blockie,{address:currentValue,size:8,scale:3}),value:ethers.utils.isAddress(currentValue)&&!isENS(currentValue)&&isENS(ens)?ens:currentValue,addonAfter:/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:4,cursor:\"pointer\"},onClick:function onClick(){setScan(!scan);},children:[/*#__PURE__*/_jsx(Badge,{count:/*#__PURE__*/_jsx(CameraOutlined,{style:{fontSize:9}}),children:/*#__PURE__*/_jsx(QrcodeOutlined,{style:{fontSize:18}})}),\" \",\"Scan\"]}),onChange:function onChange(e){updateAddress(e.target.value);}})]});}","map":{"version":3,"sources":["C:/Users/batuhansen/Desktop/eth/challenge-1-decentralized-staking/packages/react-app/src/components/AddressInput.jsx"],"names":["CameraOutlined","QrcodeOutlined","Badge","Input","useLookupAddress","React","useCallback","useState","QrReader","Blockie","ethers","isENS","address","endsWith","AddressInput","props","ensProvider","onChange","value","setValue","scan","setScan","currentValue","ens","updateAddress","newValue","resolveName","possibleAddress","zIndex","position","left","top","width","e","console","log","possibleNewValue","indexOf","substr","lastIndexOf","autoFocus","placeholder","utils","isAddress","marginTop","cursor","fontSize","target"],"mappings":"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","sourcesContent":["import { CameraOutlined, QrcodeOutlined } from \"@ant-design/icons\";\r\nimport { Badge, Input } from \"antd\";\r\nimport { useLookupAddress } from \"eth-hooks/dapps/ens\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport QrReader from \"react-qr-reader\";\r\nimport Blockie from \"./Blockie\";\r\nimport { ethers } from \"ethers\";\r\n\r\n// probably we need to change value={toAddress} to address={toAddress}\r\n\r\n/*\r\n  ~ What it does? ~\r\n  Displays an address input with QR scan option\r\n  ~ How can I use? ~\r\n  <AddressInput\r\n    autoFocus\r\n    ensProvider={mainnetProvider}\r\n    placeholder=\"Enter address\"\r\n    value={toAddress}\r\n    onChange={setToAddress}\r\n  />\r\n  ~ Features ~\r\n  - Provide ensProvider={mainnetProvider} and your address will be replaced by ENS name\r\n              (ex. \"0xa870\" => \"user.eth\") or you can enter directly ENS name instead of address\r\n  - Provide placeholder=\"Enter address\" value for the input\r\n  - Value of the address input is stored in value={toAddress}\r\n  - Control input change by onChange={setToAddress}\r\n                          or onChange={address => { setToAddress(address);}}\r\n*/\r\n\r\nconst isENS = (address = \"\") => address.endsWith(\".eth\") || address.endsWith(\".xyz\");\r\n\r\nexport default function AddressInput(props) {\r\n  const { ensProvider, onChange } = props;\r\n  const [value, setValue] = useState(props.value);\r\n  const [scan, setScan] = useState(false);\r\n\r\n  const currentValue = typeof props.value !== \"undefined\" ? props.value : value;\r\n  const ens = useLookupAddress(props.ensProvider, currentValue);\r\n\r\n  const updateAddress = useCallback(\r\n    async newValue => {\r\n      if (typeof newValue !== \"undefined\") {\r\n        let address = newValue;\r\n        if (isENS(address)) {\r\n          try {\r\n            const possibleAddress = await ensProvider.resolveName(address);\r\n            if (possibleAddress) {\r\n              address = possibleAddress;\r\n            }\r\n            // eslint-disable-next-line no-empty\r\n          } catch (e) {}\r\n        }\r\n        setValue(address);\r\n        if (typeof onChange === \"function\") {\r\n          onChange(address);\r\n        }\r\n      }\r\n    },\r\n    [ensProvider, onChange],\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {scan ? (\r\n        <div\r\n          style={{\r\n            zIndex: 256,\r\n            position: \"absolute\",\r\n            left: 0,\r\n            top: 0,\r\n            width: \"100%\",\r\n          }}\r\n          onClick={() => {\r\n            setScan(false);\r\n          }}\r\n        >\r\n          <QrReader\r\n            delay={250}\r\n            resolution={1200}\r\n            onError={e => {\r\n              console.log(\"SCAN ERROR\", e);\r\n              setScan(false);\r\n            }}\r\n            onScan={newValue => {\r\n              if (newValue) {\r\n                console.log(\"SCAN VALUE\", newValue);\r\n                let possibleNewValue = newValue;\r\n                if (possibleNewValue.indexOf(\"/\") >= 0) {\r\n                  possibleNewValue = possibleNewValue.substr(possibleNewValue.lastIndexOf(\"0x\"));\r\n                  console.log(\"CLEANED VALUE\", possibleNewValue);\r\n                }\r\n                setScan(false);\r\n                updateAddress(possibleNewValue);\r\n              }\r\n            }}\r\n            style={{ width: \"100%\" }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      <Input\r\n        id=\"0xAddress\" // name it something other than address for auto fill doxxing\r\n        name=\"0xAddress\" // name it something other than address for auto fill doxxing\r\n        autoComplete=\"off\"\r\n        autoFocus={props.autoFocus}\r\n        placeholder={props.placeholder ? props.placeholder : \"address\"}\r\n        prefix={<Blockie address={currentValue} size={8} scale={3} />}\r\n        value={ethers.utils.isAddress(currentValue) && !isENS(currentValue) && isENS(ens) ? ens : currentValue}\r\n        addonAfter={\r\n          <div\r\n            style={{ marginTop: 4, cursor: \"pointer\" }}\r\n            onClick={() => {\r\n              setScan(!scan);\r\n            }}\r\n          >\r\n            <Badge count={<CameraOutlined style={{ fontSize: 9 }} />}>\r\n              <QrcodeOutlined style={{ fontSize: 18 }} />\r\n            </Badge>{\" \"}\r\n            Scan\r\n          </div>\r\n        }\r\n        onChange={e => {\r\n          updateAddress(e.target.value);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}